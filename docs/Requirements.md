# トレンドマッチシステム機能仕様書

## システムプログラミングG2　メンバー
+ E16-5405 小野瑞貴
+ E16-5413 古田龍将
+ E16-5414 松原未和
+ E16-5416 渡辺みどり


## 改版履歴
発行日|版数|改版内容
---|---|---
2018/11/14|1.0|初版
2018/11/16|1.1|更新日時から改版履歴へ変更.<br>5.3.4　表の修正
2018/11/20|2.0|インスペクションを受けての改訂
2018/11/21|2.1|インスペクションを受けての改訂
2018/11/24|3.0|宮下さんからのインスペクション訂正
2018/11/25|3.1|宮下さんからのインスペクション訂正
2018/12/7|3.2|クラス図インスペクションを受けて訂正
2019/1/14|4.0|システム開発に伴う訂正
2019/1/15|4.1|未実装の箇所を明記



## 1.システムの概要
本システムは,就活を始める人を対象とし,自己分析と分析結果をもとにした社会人等とのマッチングを行う.

## 2.システムの目的
私たちは就活生にとって,自分にあった企業がどこなのかわからないことが,自己分析の不足と実際に働いている人からの声が足りていないことで起きていると考えた.
そこでその2点を就活における問題点とし,それらを解決することを目的とする.

本システムは就活生と社会人のエニアグラム診断と価値観の類似度からマッチングするシステムである.
就活生は自己分析を行い,その結果を基に同じような性格,価値観を持った様々な職種の社会人に会うことで,同じような考えを持つ社会人がどんな選択を行ってきたのか,生の声を聞くことができる.
本システムでは,性格をエニアグラムで測り，価値観をユーザーの裁量で選択できるようにしている.
社会人は採用であったり,自社の選考を受けるように促したり,または数年後のビジネス仲間を得たり,など様々な用途が可能になっており,就活ルールが撤廃された今,従来の不特定多数の学生とマッチングする可能性のあるものとは異なり,考え方の類似度で就活生を絞ることができる.

## 3.用語の定義
 |用語|説明|
 |---|---|
 |ユーザー|本システムに登録し,利用する人の総称|
 |管理者| 本システムの維持,運営をするユーザー|
 |学生ユーザー| 就職活動を行うために本システムを利用するユーザー|
 |社会人ユーザー| 学生ユーザーの就職支援を行うために本システムを利用するユーザー<br>Ex) 企業の採用担当など|
 |利用者|学生ユーザーと社会人ユーザーの総称|
 |アカウント情報|本システムにおいて他のユーザーに公開する情報|
 |所属|現在,ユーザーが属している学校名または企業名|
 |フリースペース|ユーザーが自己PRのために自由記述できるスペース|
 |自己分析|本システム上で行う就職活動に関する適性検査|
 |類似度|2者の自己分析結果を比較した際の一致している割合|
 |マッチング| 自己分析結果の類似度の高い学生ユーザーと社会人ユーザーを結びつけること|
 |エニアグラム|　海外の大企業で取り入れられている,性格,得手不得手を診断する性格分類法　|
 |価値観|　人生の中意思決定において重要にしてきた事柄のこと　|


## 4.アクター
* 利用者：利用者の機能(5.1)と共通機能(5.3)が使用できる.利用者は以下の2つに分けられる.
    * 学生ユーザー
    * 社会人ユーザー
* 管理者：管理者の機能(5.2)と共通機能(5.3)が使用できる.

## 5.機能要求

### 5.1 利用者の機能
##### 5.1.1 ユーザー情報の登録
理由：
+ 登録を行ったユーザーのみがシステムを利用できるようにするため.

説明：
+ メールアドレス,パスワード,氏名を入力し,ユーザー登録ができる.
+ 下記にユーザー登録をする際の制約を記す.

| 登録名 | データ形式 | 文字入力数 |その他制約|
| ---- | ---- | ---- | ---- |
|メールアドレス|半角英数字|40以下|重複なし,必須項目,<br> `何かしらの文字列` @ `何かしらの文字列` の形式で登録|
|パスワード|半角英数字|8以上20以下|必須項目|
|氏名|半角文字,全角文字|20以下|スペースなしで入力,必須項目|


##### 5.1.2 ユーザー情報の編集
理由：
+ 登録したユーザー情報を編集できるようにするため.

説明：
+ 登録したユーザー情報の全項目を編集することができる.
+ ユーザーを編集する際の制約は5.1.1と同様.
+ 既に登録されているパスワード以外の情報は保存されているデータを表示し，それを編集できるようにする.


##### 5.1.3 退会
理由：
+ システムを利用しないユーザーのユーザー情報を保持し続けないようにするため.

説明：
+ 登録されているユーザー情報を削除し,本システムの利用権をなくす.
+ アカウント情報についても同じく、削除する.


##### 5.1.4 アカウント情報の登録
理由：
 + 検索やマッチングを行う際にユーザーの情報を利用することができるようにするため.　　
 + ユーザーとアカウントを分ける意味はユーザーが登録する際に,アカウント情報が公開されるものだということを意識しやすくするため.

説明：
 + ニックネーム,卒業年度,所属,職種,性別,連絡先,内定の有無,フリースペース,価値観を設定し,入力する.
+ 下記にユーザーアカウントの登録をする際の制約を記す.
+ なお,アカウント情報登録の際には事前に個人情報の公開に同意する必要がある.

| 登録名 | データ形式 | 文字入力数 | その他制約 |
| ---- | ---- | ---- | ---- |
| ニックネーム|半角文字,全角文字|10以下|必須項目|
|卒業年度|半角数字|4文字|西暦4桁で入力,必須項目|
| 所属|半角文字,全角文字|20以下||
| 職種|ドロップダウン|  |職種IDを用意 |
| 性別 | ドロップダウン||性別IDを用意
| 連絡先 | 半角文字,全角文字 | 40以下 ||
| 内定の有無|ラジオボタン||内定IDを用意|
| フリースペース | 半角文字,全角文字 | 200以下 ||


学生ユーザーか,社会人ユーザーかの判断は卒業年度で判断する.
- 卒業年度がまだ来ていない場合：学生ユーザー
- 卒業年度が過ぎている場合：社会人ユーザー

なお職種に関しては,以下の項目から選択する.

職種ID|職種
---|---
1|学部生
2|大学院生
3|農業・水産
4|林業
5|漁業
6|鉱業
7|建設業
8|製造業
9|電気・ガス
10|運輸・通信業
11|卸売・小売・飲食業
12|金融・保険業
13|不動産業
14|サービス業
15|その他

より選択する.

(引用 [業種一覧表](https://www.chukei-news.co.jp/publication/chubunenkan-regist/type.pdf) より大項目を参照)

##### 5.1.5 アカウント情報の編集
理由：
 + 登録したアカウント情報に変更がある場合に登録内容を書き換えることができるようにするため.

 説明：
 + 登録したアカウント情報の全項目を編集することができる.
 + 編集時の制約は5.1.4と同様.
 + 既に登録されている情報は保存されているデータを表示し，それを編集できるようにする.

##### 5.1.6 自己分析の実施
理由：
+ 利用者のシステムの利用および就職活動に役立てるため.
+ エニアグラム結果と価値観によりマッチングを行うため.
	+ エニアグラムは個人の性格を表すため
	+ 価値観は今後の人生に求めるものを表すため

説明：
+ ユーザーは事前にエニアグラム診断を受け,その結果を入力する.(必須)
+ エニアグラムについては日本エニアグラム学会の[90問回答式チェック](https://www.enneagram.ne.jp/about/diagnosis)を利用する.
+ ユーザーは主な価値観を3つまで入力する.(少なくとも1つ入力)
+ ユーザーの価値観を導き出すにあたっての自己分析方法を提示する.（画像つき）
    - 具体的な方法
    - モチベーショングラフの作成
    - 自分史の作成
    - 上記を踏まえどんな価値観をもって人生を送ってきたのかを考える
+ 個人のエニアグラムの結果はユーザー情報に持たせる
+ 価値観は価値観データベースに保存されている価値観と,ユーザー情報を紐付ける.

| 登録名 | データ形式 | 文字入力数 | その他制約 |
| ---- | ---- | ---- | ---- |
|エニアグラム診断結果|半角数字||0~10で入力する<br>9項目分用意する|
| 価値観|　半角文字,全角文字　|　50以下　|　1つ以上入力する<br>打ち込んだ内容を含む,システムに登録されている価値観をドロップダウンリストで表示する<br>なお,登録されていない場合は5.1.11を行う　|


##### 5.1.7 マッチング
理由：
- 自己分析結果の類似度が高いユーザーを探し出すため.
- 本システムの目的である「同じような性格,価値観を持った様々なユーザーとマッチングする」の指標としてユーザー同士の類似度を作成するため.

説明：
- 学生ユーザーは全ての社会人ユーザーとの自己分析結果の類似度を算出する.
- 社会人ユーザーは全ての学生ユーザーとの自己分析結果の類似度を算出する.
- 類似度の算出の入力値は5.1.6で入力したエニアグラムの結果と価値観の項目とする.
- なお,上記項目を他のユーザーに公開するため,事前に個人情報の公開に同意する必要がある.
- 類似度の算出方法はエニアグラムの結果を基にしたユークリッド距離(d : 0<=d<=30, dが小さいほど結果が似ている)と,一致した価値観の数の定数倍の和とする.なお,計算式にすると以下の通り.
- 類似度＝30-ユークリッド距離(d)+(一致した価値観の数)*5


##### 5.1.8 マッチング閲覧
理由:
- 5.1.7の結果を表示するため.

説明：
- 一覧画面で記載する情報はニックネーム,フリースペース内容の一部.
- 詳しく見たい人を選択すると,当該アカウントのアカウント情報が全て見られる.(未実装)


##### 5.1.9 ダイレクトメッセージ機能(未実装)
 理由：
 + 本システム上でユーザー同士が連絡を取れるようにするため.

 説明：
 + ユーザー同士が本システム内でメッセージの送受信ができる.
 + 送受信したメッセージはヘッダーのダイレクトメッセージ(以下DM)ボタンを押すことで確認することができる.
 + メッセージの送信はする際は,下記の2通りでのみ実行可能とする.
     + ユーザーが他人のアカウントページでクリエイトメッセージボタンを押す
     + 受信したメッセージに対する返信ボタンを押す
 + なお,メッセージの送信相手は以下の通り.
     + 他人のアカウントページでクリエイトメッセージボタンを押した場合は,送信相手は当該アカウント
    + 受信メッセージに対する返信ボタンを押した場合は,当該メッセージの送信者

##### 5.1.10 通報(未実装)
理由：
+ 不適切なアカウント等を発見した際に管理者に知らせるため.

説明：
+ 不適切なアカウント等を発見した際に当該アカウント画面から管理者に知らせる.


##### 5.1.11 価値観の登録
理由：
+ 必要な価値観を登録するため.

説明：
+ 今まで登録していなかった価値観を登録する.

| 登録名 | データ形式 | 文字入力数 |その他制約|
| ---- | ---- | ---- | ---- |
|価値観|半角英数字|50以下|重複なし,必須項目|


### 5.2 管理者の機能
##### 5.2.1 ユーザー削除
理由：
+ 不適切なユーザーを削除するため.

説明：
 + 不適切なユーザーを削除する.

##### 5.2.2 一斉連絡(未実装)
理由：
+ ユーザーに一度にメッセージを送ることができるようにするため.

説明：
+ ユーザーに対して一斉連絡を行う.
+ メッセージはダイレクトメッセージとしてユーザーに届く.

### 5.3 共通機能

#####  5.3.1 ログイン
理由：
+ 許可されたユーザーのみ,システムの機能を使用することができるようにするため.

説明：
+ ユーザーはユーザー登録後にログインを行うことができる.利用者,管理者はメールアドレスとパスワードを入力し,認証を受けることでシステムに接続される.

##### 5.3.2 ログアウト
理由：
+ ユーザーのコンピュータを用いる,もしくはXSSやネットワークの盗聴によって,他者がユーザーの保持しているセッションに再接続し,セッションを乗っ取ることを防ぐため.

説明：
+ システムへの接続を終了する.


##### 5.3.3 アカウント情報の閲覧
理由：
 + 自分自身のアカウント情報や,検索やマッチングを行った際に当該アカウントの詳細を知ることができるようにするため.

説明：
+ 自分と他人のアカウント情報を閲覧することができる.(他人のアカウント閲覧に関しては未実装)
+ 学生ユーザーの内定の有無が有の場合,アカウント名のあとに印をつける.(未実装)
+ 登録した自己分析結果も閲覧することができる.


##### 5.3.4 アカウント検索

理由:

- 特定の情報から他のアカウントを探すため.

説明:
- 以下の情報をユーザーは入力し検索をかける.

 登録名 |  データ形式 | 文字入力数 | その他制約
---|---|---|---
ニックネーム|全角半角文字| 10字以下 | を含む検索
|卒業年度  | 半角数字 |  4文字 |
| 所属|半角文字,全角文字|20以下|
| 職種|ドロップダウン||職種IDを用意
| 性別 | ラジオボタン|  |性別ID用意|
|フリースペース | 全角半角文字 | 20字以下 | を含む検索
| 表示順  |ドロップダウン ||必須項目<br>Ex)登録順など

##### 5.3.5 アカウント一覧表示
理由：
- 検索したアカウントを表示するため.

説明：
- また5.3.4アカウント検索を同じ画面に表示し,使用できるようにする.
- 一覧画面で記載する情報はニックネーム,フリースペース内容の一部.
- 詳しく見たい人を選択すると,当該アカウントのアカウント情報が全てみられる.(未実装)


## 6. 非機能要求
### 6.1 セキュリティ対策

#### 6.1.1 XSS対策(実装途中)
理由：
+ 攻撃者によって利用者が偽ページに誘導され,個人情報等を抜き取られないようにするため.

説明：
+ IPAの安全なwebサイトの作り方を参照し,セキュリティ実装の状況を随時確認する.運用時は定期的にセキュリティ監査を行う.

#### 6.1.2 ロールベースアクセス制御
理由：
+ 認められたユーザのシステムアクセスを制御するため.

説明：
+ 「ユーザー」にはユーザーの機能を使用する権限を,「管理者」にはユーザーの機能及び管理者の機能を使用する権限を与える.この権限をもとに,ユーザ情報に格納していく.このとき,権限を追加しやすくするためにロール値に余裕を持たせて設計する.

#### 6.1.3 url直打ちでのJSPファイルへのアクセス禁止(未実装)
理由：
+ ユーザー以外の者が本来アクセスすることのできないページにアクセスすることを防ぐため.

説明：
+ ユーザー以外の者が本来アクセスすることができないページにurl直打ちでアクセスしようとした際には,そのurlを保持し,アクセスするための認証画面へ遷移させる.認証が完了すれば保持しているurlを返す.

#### 6.1.4 タイムアウト時間の設定
理由：
+ タイムアウトする前に他者が保持されているセッションに,ユーザーのコンピュータを用いる,もしくはXSSやネットワークの盗聴によって,再接続され,セッションを乗っ取られることを防ぐため.

説明：
+ セッションの保持時間は30分に設定する.
